<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>The Fab Four technique to create Responsive Emails without Media Queries</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">The Fab Four technique to create Responsive Emails without Media Queries</h1>
</header>
<section data-field="subtitle" class="p-summary">
I think I found a new way to create responsive emails, without media queries. The solution involves the CSS calc() function and the three…
</section>
<section data-field="body" class="e-content">
<section name="f4b4" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="7e81" id="7e81" class="graf graf--h3 graf--leading graf--title">The Fab Four technique to create Responsive Emails without Media Queries</h3><p name="290c" id="290c" class="graf graf--p graf-after--h3">I think I found a new way to create responsive emails, without media queries. The solution involves the CSS <em class="markup--em markup--p-em">calc()</em> function and the three <em class="markup--em markup--p-em">width</em>, <em class="markup--em markup--p-em">min-width</em> and <em class="markup--em markup--p-em">max-width</em> properties.</p><p name="40e0" id="40e0" class="graf graf--p graf-after--p">Or as I like to call them all together: the Fab Four (in CSS).</p><figure name="4513" id="4513" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*8MfWNObJP1mFnYJzKkdflQ.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*8MfWNObJP1mFnYJzKkdflQ.png"></div><figcaption class="imageCaption">calc() &amp; width &amp; min-width &amp; max-width, aka The Fab Four (in CSS).</figcaption></figure><h3 name="d921" id="d921" class="graf graf--h3 graf-after--figure">The problem</h3><p name="9bfe" id="9bfe" class="graf graf--p graf-after--h3">Making responsive emails is hard, especially since email clients on mobile (like Gmail, Yahoo or Outlook.com) don’t support media queries. An <a href="http://labs.actionrocket.co/the-hybrid-coding-approach" data-href="http://labs.actionrocket.co/the-hybrid-coding-approach" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">hybrid approach</a>, a <a href="https://julie.io/writing/gmail-first-strategy-for-responsive-emails/" data-href="https://julie.io/writing/gmail-first-strategy-for-responsive-emails/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Gmail first strategy</a>, or <a href="http://webdesign.tutsplus.com/tutorials/creating-a-future-proof-responsive-email-without-media-queries--cms-23919" data-href="http://webdesign.tutsplus.com/tutorials/creating-a-future-proof-responsive-email-without-media-queries--cms-23919" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">a responsive email without media queries</a> are great ways to adapt to this situation.</p><p name="8de3" id="8de3" class="graf graf--p graf-after--p">That last approach has been my favorite so far. The big idea is to have columns as <em class="markup--em markup--p-em">&lt;div&gt;</em>s with a fixed width aligned with “<em class="markup--em markup--p-em">display:inline-block”</em>. Once a screen can no longer contain two blocks side by side, they will naturally flow below each other. But I’ve always had a problem with this.</p><p name="d88b" id="d88b" class="graf graf--p graf-after--p">Once all the blocks are stacked, they don’t take the full width of the email.</p><figure name="1d1a" id="1d1a" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 277px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 39.6%;"></div><img class="graf-image" data-image-id="1*ybAI7RS4xjmQY3Y_B4jUnw.png" data-width="1247" data-height="494" src="https://cdn-images-1.medium.com/max/800/1*ybAI7RS4xjmQY3Y_B4jUnw.png"></div><figcaption class="imageCaption">Without media queries, columns can stack up but not grow full width. <a href="http://webdesign.tutsplus.com/tutorials/creating-a-future-proof-responsive-email-without-media-queries--cms-23919" data-href="http://webdesign.tutsplus.com/tutorials/creating-a-future-proof-responsive-email-without-media-queries--cms-23919" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Illustration by Nicole Merlin</a>.</figcaption></figure><p name="7e49" id="7e49" class="graf graf--p graf-after--figure">I’ve been looking for ways to solve this problem for a long time. Flexbox is a great contender, but unfortunately <a href="https://medium.com/@hteumeuleu/using-flexbox-in-an-email-4b1aa7a69886#.83apq23wx" data-href="https://medium.com/@hteumeuleu/using-flexbox-in-an-email-4b1aa7a69886#.83apq23wx" class="markup--anchor markup--p-anchor" target="_blank">Flexbox support in an email</a> is abysmal.</p><h3 name="dbfa" id="dbfa" class="graf graf--h3 graf-after--p">A solution</h3><h4 name="109c" id="109c" class="graf graf--h4 graf-after--h3"><em class="markup--em markup--h4-em">Remembering width</em>, <em class="markup--em markup--h4-em">min-width</em> and <em class="markup--em markup--h4-em">max-width</em></h4><p name="67ce" id="67ce" class="graf graf--p graf-after--h4">On top of the <em class="markup--em markup--p-em">calc()</em> function, the solution I found involves these three CSS properties. In order to fully understand how it works, here’s a reminder of how <em class="markup--em markup--p-em">width</em>, <em class="markup--em markup--p-em">min-width</em> and <em class="markup--em markup--p-em">max-width</em> behave when used together (as <a href="http://goetter.tumblr.com/post/64119638003/quiz-parce-que-la-taille-%C3%A7a-compte" data-href="http://goetter.tumblr.com/post/64119638003/quiz-parce-que-la-taille-%C3%A7a-compte" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">clearly summarized</a> by fellow french front-end developer Raphaël Goetter).</p><ul class="postList"><li name="a10e" id="a10e" class="graf graf--li graf-after--p">If the <em class="markup--em markup--li-em">width</em> value is greater than the <em class="markup--em markup--li-em">max-width</em> value, <em class="markup--em markup--li-em">max-width</em> wins.</li><li name="02c8" id="02c8" class="graf graf--li graf-after--li">If the <em class="markup--em markup--li-em">min-width</em> value is greater than the <em class="markup--em markup--li-em">width</em> or <em class="markup--em markup--li-em">max-width</em> values, <em class="markup--em markup--li-em">min-width</em> wins.</li></ul><p name="aa9d" id="aa9d" class="graf graf--p graf-after--li">Can guess what the width of a box with the following styles would be ?</p><pre name="476c" id="476c" class="graf graf--pre graf-after--p">.box {<br>    width:320px;<br>    min-width:480px;<br>    max-width:160px;<br>}</pre><p name="d78c" id="d78c" class="graf graf--p graf-after--pre"><em class="markup--em markup--p-em">(Answer : the box would be 480px wide.)</em></p><h4 name="5796" id="5796" class="graf graf--h4 graf-after--p">Introducing calc() and the magic formula</h4><p name="03a2" id="03a2" class="graf graf--p graf-after--h4">Without further ado, here is an example of the Fab Four to create two columns that will stack and grow below 480px.</p><pre name="0b1a" id="0b1a" class="graf graf--pre graf-after--p">.block {<br>    display:inline-block;<br>    min-width:50%;<br>    max-width:100%;<br>    width:calc((480px — 100%) * 480);<br>}</pre><p name="b804" id="b804" class="graf graf--p graf-after--pre">Let’s break it down for each <em class="markup--em markup--p-em">width</em> property.</p><pre name="72e8" id="72e8" class="graf graf--pre graf-after--p">min-width:50%;</pre><p name="28a8" id="28a8" class="graf graf--p graf-after--pre">The <em class="markup--em markup--p-em">min-width</em> property defines our column widths on what we could call our desktop version. We can change this value to add more columns (for example, 25% for a four columns layout), or set columns with fixed pixel widths.</p><pre name="ea12" id="ea12" class="graf graf--pre graf-after--p">max-width:100%;</pre><p name="a55c" id="a55c" class="graf graf--p graf-after--pre">The <em class="markup--em markup--p-em">max-width</em> property defines our column widths on what we could call our mobile version. At 100%, each column will grow and adapt to the full width of their parent container. We can change this value to keep columns on mobile (for example, 50% for a two columns layout).</p><pre name="325d" id="325d" class="graf graf--pre graf-after--p">width:calc((480px — 100%) * 480);</pre><p name="76e9" id="76e9" class="graf graf--p graf-after--pre">Thanks to the <em class="markup--em markup--p-em">calc()</em> function, the <em class="markup--em markup--p-em">width</em> property is where the magic happens. The <em class="markup--em markup--p-em">480</em> value matches our desired breakpoint value. The 100% corresponds to the width of the parent container of our columns. The goal of this calculation is to create a value bigger than our <em class="markup--em markup--p-em">max-width</em> or smaller than our <em class="markup--em markup--p-em">min-width</em>, so that either one of those property is applied instead.</p><p name="7df7" id="7df7" class="graf graf--p graf-after--p">Here are two examples.</p><figure name="3e94" id="3e94" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 200px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 28.599999999999998%;"></div><img class="graf-image" data-image-id="1*zCzf5ZChfB1WB5FGULzpig.png" data-width="700" data-height="200" src="https://cdn-images-1.medium.com/max/800/1*zCzf5ZChfB1WB5FGULzpig.png"></div></figure><p name="ac3a" id="ac3a" class="graf graf--p graf-after--figure">With a parent of 500px, the calculated <em class="markup--em markup--p-em">width</em> equals -9600px. It is smaller than the min-width. So the min-width of 50% wins. Thus we have a two columns layout.</p><figure name="e92a" id="e92a" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 200px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 28.599999999999998%;"></div><img class="graf-image" data-image-id="1*PJANsECXH1VCJ5UxxaJ-5w.png" data-width="700" data-height="200" src="https://cdn-images-1.medium.com/max/800/1*PJANsECXH1VCJ5UxxaJ-5w.png"></div></figure><p name="1ab6" id="1ab6" class="graf graf--p graf-after--figure">With a parent of 400px, the calculated <em class="markup--em markup--p-em">width</em> equals 38400px. It is bigger than the min-width, but max-width is smaller. So the max-width of 100% wins. Thus we have a one column layout.</p><h3 name="c6a1" id="c6a1" class="graf graf--h3 graf-after--p">Demo</h3><p name="0131" id="0131" class="graf graf--p graf-after--h3">Here is a demo of what this technique can do. <br>You can <a href="http://emails.hteumeuleu.fr/wp-content/uploads/2016/02/the-fab-four.html" data-href="http://emails.hteumeuleu.fr/wp-content/uploads/2016/02/the-fab-four.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">see the full demo online here</a> (or <a href="https://litmus.com/builder/9c0fce1" data-href="https://litmus.com/builder/9c0fce1" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">on Litmus Builder</a> or <a href="http://codepen.io/hteumeuleu/pen/VaZgqg" data-href="http://codepen.io/hteumeuleu/pen/VaZgqg" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">on CodePen</a>).</p><figure name="e12a" id="e12a" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 448px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 64%;"></div><img class="graf-image" data-image-id="1*YcVo7AGzJekmg5eupqLK0A.png" data-width="800" data-height="512" src="https://cdn-images-1.medium.com/max/800/1*YcVo7AGzJekmg5eupqLK0A.png"></div><figcaption class="imageCaption">Illustrations by <a href="https://dribbble.com/shots/2012203-Paul-George" data-href="https://dribbble.com/shots/2012203-Paul-George" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">Elias Stein</a></figcaption></figure><p name="fce9" id="fce9" class="graf graf--p graf-after--figure">And here are two screenshots of this demo in Gmail, on the desktop webmail and on the mobile app on iOS. Same code, different render.</p><figure name="e7a4" id="e7a4" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 438px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 62.5%;"></div><img class="graf-image" data-image-id="1*GUknMjQDihG2WkqHIEBBUA.png" data-width="1440" data-height="900" src="https://cdn-images-1.medium.com/max/800/1*GUknMjQDihG2WkqHIEBBUA.png"></div><figcaption class="imageCaption">The Fab Four demo as seen on the Gmail desktop webmail and on the Gmail iOS app.</figcaption></figure><p name="feef" id="feef" class="graf graf--p graf-after--figure">In this demo, I’ve set a few examples of different grids (with two, three, four columns). The first grid, with the images, is built to go from four columns on desktop to two columns on mobile. The other grids are built to grow full width on mobile.</p><p name="91cb" id="91cb" class="graf graf--p graf-after--p">Also, notice how the title switches from a left aligned position on desktop to a centered position on mobile. This is achieved by giving the title a fixed width of 190px and a “<em class="markup--em markup--p-em">margin:0 auto;</em>” to center it. On desktop, the title’s parent container has a min-width of 190px applied, so the logo stays on the left. On mobile, the parent container grows full width, so the logo becomes centered.</p><p name="a9fd" id="a9fd" class="graf graf--p graf-after--p">A great aspect of this technique is that, since everything is based on the grid’s parent width, an email can adapt even on a desktop webmail. For example, on Outlook.com, no matter if you chose to have the reading pane on the bottom or on the right, the email will correctly responds to the reading pane’s width. This would be impossible to do with media queries.</p><figure name="afce" id="afce" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 260px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 37.1%;"></div><img class="graf-image" data-image-id="1*lbGOlHr5J-I2XSlbLrfQCg.png" data-width="2068" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*lbGOlHr5J-I2XSlbLrfQCg.png"></div><figcaption class="imageCaption">On Outlook.com, the email adapts to the different views.</figcaption></figure><h3 name="80b0" id="80b0" class="graf graf--h3 graf-after--figure">Support</h3><p name="a96a" id="a96a" class="graf graf--p graf-after--h3">In browsers, calc() is <a href="http://caniuse.com/#search=calc%28%29" data-href="http://caniuse.com/#search=calc()" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">well supported since IE9</a>. Turns out, calc() also has a pretty good support in email clients. It works in Apple Mail (on iOS and OS X), Thunderbird, Outlook (iOS and Android apps), Gmail (webmail, iOS and Android apps), AOL (webmail), and the old Outlook.com (still present in Europe).</p><h4 name="9c9e" id="9c9e" class="graf graf--h4 graf-after--p">The old Outlook.com</h4><p name="8019" id="8019" class="graf graf--p graf-after--h4">Outlook.com has one small quirk, though. The webmail will filter every property with a <em class="markup--em markup--p-em">calc()</em> that includes any parenthesis. This means that “<em class="markup--em markup--p-em">calc(480px - 100%)</em>” is supported, but “<em class="markup--em markup--p-em">calc((480px - 100%) * 480)</em>” is not. Since my initial formula involves parenthesis, we need to refactor it to avoid parenthesis. So the formula to support the old Outlook.com looks like this.</p><pre name="0234" id="0234" class="graf graf--pre graf-after--p">width:calc(480px * 480 — 100% * 480);</pre><h4 name="dc7b" id="dc7b" class="graf graf--h4 graf-after--pre">Unsupported clients</h4><p name="62df" id="62df" class="graf graf--p graf-after--h4">Of course, <em class="markup--em markup--p-em">calc()</em> isn’t supported in old email clients like Lotus Notes, or the latest Outlook for Windows (using Word’s HTML rendering engine). It also won’t work on Outlook Web App (both Office 365 and the new Outlook.com) and Yahoo (webmail, iOS and Android apps). These two will strip out any property involving a <em class="markup--em markup--p-em">calc()</em>.</p><h4 name="c32c" id="c32c" class="graf graf--h4 graf-after--p">Fallbacks</h4><p name="916f" id="916f" class="graf graf--p graf-after--h4">In these cases, I would suggest duplicating all involved properties with fixed width values for clients that don’t support <em class="markup--em markup--p-em">calc()</em>. In order to hide The Fab Four from those clients, I advise to use <em class="markup--em markup--p-em">calc()</em> functions, even if it’s not technically useful. Our first example would look like the following.</p><pre name="a5cd" id="a5cd" class="graf graf--pre graf-after--p">.block {<br>    display:inline-block;<br>    min-width:240px;<br>    width:50%;<br>    max-width:100%;<br>    min-width:calc(50%);<br>    width:calc(480px * 480 — 100% * 480);<br>}</pre><h4 name="ca79" id="ca79" class="graf graf--h4 graf-after--pre">Outlook Web App</h4><p name="ec45" id="ec45" class="graf graf--p graf-after--h4">However, Outlook Web App (both Office 365 and the new Outlook.com) has one more quirk of its own. When a <em class="markup--em markup--p-em">calc()</em> function contains a multiplication (with the ‘<em class="markup--em markup--p-em">*</em>’ character), the new Outlook.com and Office 365 will remove the whole inline <em class="markup--em markup--p-em">style</em> attribute corresponding. This means we need to calculate the multiplications by hand and only keep the resulting substraction. Here’s what the final calculation looks like for a 480px breakpoint.</p><pre name="e2f5" id="e2f5" class="graf graf--pre graf-after--p">width:calc(230400px — 48000%);</pre><h4 name="e4cd" id="e4cd" class="graf graf--h4 graf-after--pre">WebKit Prefixes</h4><p name="1df2" id="1df2" class="graf graf--p graf-after--h4">Older versions of Android (before Android 5.0) or iOS (before iOS 7) require <em class="markup--em markup--p-em">-webkit-</em> prefixes in order to work. Our final version looks like the following.</p><pre name="0c4c" id="0c4c" class="graf graf--pre graf-after--p">.block {<br>    display:inline-block;<br>    min-width:240px;<br>    width:50%;<br>    max-width:100%;<br>    min-width:-webkit-calc(50%);<br>    min-width:calc(50%);<br>    width:-webkit-calc(230400px — 48000%);<br>    width:calc(230400px — 48000%);<br>}</pre><h3 name="4472" id="4472" class="graf graf--h3 graf-after--pre">Shortcomings and final thoughts</h3><p name="82cf" id="82cf" class="graf graf--p graf-after--h3">Like anything in the email development world, the Fab Four technique isn’t perfect. Here are a few limitations that I can think of:</p><ul class="postList"><li name="de57" id="de57" class="graf graf--li graf-after--p">It won’t work on Yahoo. The desktop version of its webmail supports media queries, though. So we could improve things a bit by making a mobile first version of our email, and then enhancing it on desktop with media queries.</li><li name="f125" id="f125" class="graf graf--li graf-after--li">You can only set one breakpoint. This might not be such a problem for emails though, as designs rarely go beyond 600px on desktop and don’t require more than one breakpoint to adapt on mobile.</li><li name="b90a" id="b90a" class="graf graf--li graf-after--li">You can only diminish the number of columns from a desktop version to a mobile version. While this rarely happens, you couldn’t go from a four columns layout on mobile to a single column layout on desktop.</li><li name="aef2" id="aef2" class="graf graf--li graf-after--li">The final version of the calculation (to support the old Outlook.com and degrade gracefully on the new one) is hard to read. Using a preprocessor and a mixin to generate all the required properties could be more than helpful.</li></ul><p name="b32c" id="b32c" class="graf graf--p graf-after--li">I still think that this technique will come in very handy in a lot of cases, especially for Gmail optimizations. I’m sure there is also use cases for websites (like widgets, ads, …).</p><p name="ea38" id="ea38" class="graf graf--p graf-after--p graf--trailing">And I can’t wait to see what this will inspire you to create.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@hteumeuleu" class="p-author h-card">Rémi Parmentier</a> on <a href="https://medium.com/p/baf11fdfa848"><time class="dt-published" datetime="2016-02-11T18:34:38.464Z">February 11, 2016</time></a>.</p><p><a href="https://medium.com/@hteumeuleu/the-fab-four-technique-to-create-responsive-emails-without-media-queries-baf11fdfa848" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on April 9, 2020.</p></footer></article></body></html>