---
title:  "Thinking Outside the &lt;table&gt; at TEDC16"
date:   2016-08-03 21:03:13 +0200
---
<section name="c63d" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="c07b" id="c07b" class="graf graf--h3 graf--leading graf--title">Thinking Outside the &lt;table&gt; at TEDC16</h3><p name="14ca" id="14ca" class="graf graf--p graf-after--h3">Last week, I had the honor to speak at <a href="https://litmus.com/conference/london" data-href="https://litmus.com/conference/london" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">The Email Design Conference in London</a> (aka TEDC16 or #LitmusLive). I gave a talk I called “<em class="markup--em markup--p-em">Thinking Outside the &lt;table&gt;”</em>. It’s a mix of some of my previous articles, like <a href="https://emails.hteumeuleu.com/super-mail-forward-an-email-that-evolves-as-you-forward-it-84466596f30d" data-href="https://emails.hteumeuleu.com/super-mail-forward-an-email-that-evolves-as-you-forward-it-84466596f30d" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Super Mail Forward</a>, <a href="https://emails.hteumeuleu.com/using-flexbox-in-an-email-4b1aa7a69886" data-href="https://emails.hteumeuleu.com/using-flexbox-in-an-email-4b1aa7a69886" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Using Flexbox in an Email</a> or <a href="https://medium.freecodecamp.com/the-fab-four-technique-to-create-responsive-emails-without-media-queries-baf11fdfa848" data-href="https://medium.freecodecamp.com/the-fab-four-technique-to-create-responsive-emails-without-media-queries-baf11fdfa848" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">The Fab Four Technique</a>, but with a new narration and some new content.</p><p name="13a8" id="13a8" class="graf graf--p graf-after--p graf--trailing"><a href="https://speakerdeck.com/hteumeuleu/thinking-outside-the-table" data-href="https://speakerdeck.com/hteumeuleu/thinking-outside-the-table" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Here are my raw slides</a>. And here is a transcript of my talk.</p></div></div></section><section name="7ce9" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="c407" id="c407" class="graf graf--p graf--leading">I am a web developer as well as an email developer. The question I get asked the most when I tell that to web developers is “How is your mental health?”. Because they’re thinking about the disgust they have for using tables for layout, inline styles and other email quirks. But I always thought there’s much more to do if we get past these first feelings.</p><p name="e90b" id="e90b" class="graf graf--p graf-after--p">Today, I want to show you three examples of things I’ve done in the past year or so that illustrate what happens when you start <em class="markup--em markup--p-em">thinking outside the &lt;table&gt;</em>.</p><figure name="5e0a" id="5e0a" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*bJxZ9BMhDw3BWTpFPFVVxQ.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*bJxZ9BMhDw3BWTpFPFVVxQ.png"></div></figure><p name="9e7a" id="9e7a" class="graf graf--p graf-after--figure">My first example is an email I made called <strong class="markup--strong markup--p-strong">Super Mail Forward</strong>. Last year, Litmus held a community contest which theme was <a href="https://litmus.com/community/discussions/3969-community-contest-emails-worth-forwarding" data-href="https://litmus.com/community/discussions/3969-community-contest-emails-worth-forwarding" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Emails Worth Forwarding</a>. The goal was to “<em class="markup--em markup--p-em">take advantage of some of the quirks that happen when an email is forwarded</em>”. I thought this was a very interesting subject, especially since I knew nothing about it.</p></div><div class="section-inner sectionLayout--fullWidth"><figure name="a0ea" id="a0ea" class="graf graf--figure graf--layoutFillWidth graf-after--p"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*Bn5wqfO9jzS5yGOiRmXn5g.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/2560/1*Bn5wqfO9jzS5yGOiRmXn5g.png"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="0a97" id="0a97" class="graf graf--p graf-after--figure">So first I needed to find out <strong class="markup--strong markup--p-strong">what happens when you forward an email</strong> (especially from a webmail). And I really wanted to work with webmails because it is much more easier to just fire up a web inspector and see how styles and markup is transformed by a webmail than from most native email clients. So: what happens when you forward an email?</p><p name="0b82" id="0b82" class="graf graf--p graf-after--p">Turns out, <strong class="markup--strong markup--p-strong">not much more</strong> than when the webmail receives it in the first place. This means that if a webmail doesn’t support background images in CSS, like Outlook.com, it will strip out the `<em class="markup--em markup--p-em">background</em>`property when it receives the email, and forward the email without it after that.</p><p name="7ffa" id="7ffa" class="graf graf--p graf-after--p">So with that in mind, I kept wondering… <strong class="markup--strong markup--p-strong">How many times can you forward an email before its code becomes complete gibberish? </strong>This gave me the idea of some sort of game where you could forward an email between the four webmails of AOL, Yahoo, Outlook.com and Gmail. Each time you forward it to the correct webmail in the right order, the webmail’s cell will turn green, and stay that way until the end. I built a prototype that did exactly that.</p><figure name="1a01" id="1a01" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 187px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 26.700000000000003%;"></div><img class="graf-image" data-image-id="1*z6nRU8iIoVEV7b_YrvOaoQ.png" data-width="960" data-height="256" src="https://cdn-images-1.medium.com/max/800/1*z6nRU8iIoVEV7b_YrvOaoQ.png"></div></figure><p name="8392" id="8392" class="graf graf--p graf-after--figure"><a href="https://gist.github.com/hteumeuleu/2a28bae848090a172c1880b7811e2d43" data-href="https://gist.github.com/hteumeuleu/2a28bae848090a172c1880b7811e2d43" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Here’s the code</a> for a basic version of this email.</p><figure name="941f" id="941f" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*wSwHI5RIr-G4_nKi4ar0MQ.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*wSwHI5RIr-G4_nKi4ar0MQ.png"></div></figure><p name="7990" id="7990" class="graf graf--p graf-after--figure">Some of this code is there to turn the cells green. And some of it is there to maintain other cells grey in certain conditions.</p><p name="b11e" id="b11e" class="graf graf--p graf-after--p">When you send the email for <strong class="markup--strong markup--p-strong">the first time to AOL</strong>, the webmail will wrap the HTML with a `<em class="markup--em markup--p-em">&lt;div class=”aolReplacedBody”&gt;</em>` and prefix every CSS rule with the same `<em class="markup--em markup--p-em">.aolReplacedBody</em>` class. The first cell is activated with an inline style.</p><figure name="ba07" id="ba07" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*IDwbHydzAVMbXw_h-ld4NQ.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*IDwbHydzAVMbXw_h-ld4NQ.png"></div><figcaption class="imageCaption">The code transformed for the first time by AOL’s webmail.</figcaption></figure><p name="e494" id="e494" class="graf graf--p graf-after--figure">In order to maintain this cell grey when viewed in another webmail, I relied on a parsing bug from AOL. When AOL encountered a background image declaration within a `<em class="markup--em markup--p-em">&lt;style&gt;</em>`, it would incorrectly replace the URL of this image with HTML. This didn’t make any sense, and thus this style would get ignored only on AOL, and maintained that way from now on when forwarded to other webmails.</p><p name="058f" id="058f" class="graf graf--p graf-after--p">When you forward the email <strong class="markup--strong markup--p-strong">from AOL to Yahoo</strong>, Yahoo will once again prefix every class name with its own prefix (like `<em class="markup--em markup--p-em">yiv113</em>`) as well as with an identifier of its own (like `<em class="markup--em markup--p-em">yui_123456789</em>`).</p><figure name="68b5" id="68b5" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*m4whk1x9x8XfO1ciB6K6Pw.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*m4whk1x9x8XfO1ciB6K6Pw.png"></div><figcaption class="imageCaption">The code transformed for the second time by Yahoo.</figcaption></figure><p name="84ab" id="84ab" class="graf graf--p graf-after--figure">In order to activate the green cell for Yahoo, I used the `<em class="markup--em markup--p-em">@media yahoo</em>` hack (<a href="https://twitter.com/M_J_Robbins/status/572749728229797888" data-href="https://twitter.com/M_J_Robbins/status/572749728229797888" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">originally found by Mark Robbins</a>). Last year, Yahoo added support for media queries, but only for a small subset (like `<em class="markup--em markup--p-em">min-width</em>` or `<em class="markup--em markup--p-em">max-width</em>`). Yahoo will remove any keyword it does not recognize or support after a <em class="markup--em markup--p-em">@media</em> declaration. So `<em class="markup--em markup--p-em">@media yahoo</em>` will be transformed to `<em class="markup--em markup--p-em">@media</em>`, thus activating the styles contained in this media query from now on.</p><p name="6c8a" id="6c8a" class="graf graf--p graf-after--p">Next, when you forward the email <strong class="markup--strong markup--p-strong">from Yahoo to Outlook.com</strong>, Outlook.com will once again prefix every class and id attributes with its own prefix (`<em class="markup--em markup--p-em">ecx</em>`), and prefix every CSS rule with `<em class="markup--em markup--p-em">.ExternalClass</em>`. (NB : I’m referring here to the old version of Outlook.com, still available in France.)</p><figure name="2bdb" id="2bdb" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*2VRWvTwa-EhGzZGfuCHHwA.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*2VRWvTwa-EhGzZGfuCHHwA.png"></div></figure><p name="7097" id="7097" class="graf graf--p graf-after--figure">Outlook.com doesn’t support background images declaration in CSS. So it will remove all the inline styles that kept the cells grey with a spacer image. This is great, because it now turns the third cell green for Outlook.com. But it also turns the last one green, normally to dedicated to the final step. In order to prevent this, I set up a rule to maintain this fourth cell grey at this point.</p><p name="014b" id="014b" class="graf graf--p graf-after--p">Finally, when forwarding the email <strong class="markup--strong markup--p-strong">from Outlook.com to Gmail</strong>, Gmail will remove every `<em class="markup--em markup--p-em">id</em>` or `<em class="markup--em markup--p-em">class</em>` attributes. This makes all of the styles in the <em class="markup--em markup--p-em">&lt;head&gt;</em> useless. And thus the four cells are activated in green.</p><figure name="8a9e" id="8a9e" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*wZHjCoIZ_cpFiCSaTSZkkg.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*wZHjCoIZ_cpFiCSaTSZkkg.png"></div></figure><p name="c96c" id="c96c" class="graf graf--p graf-after--figure">And that’s how I made a first prototype. And then I thought: if I’m able to play with one cell color, why not spice things up a bit and play with a more complex grid. Like, say, <strong class="markup--strong markup--p-strong">256 cells</strong>. This is enough to make great pixel art. And since I’m a huge Mario fan, I decided to use the question blocks from Super Mario World.</p><figure name="79d9" id="79d9" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 186px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 26.6%;"></div><img class="graf-image" data-image-id="1*DxesNrAJmLo47_A0rbBfHA.png" data-width="800" data-height="213" src="https://cdn-images-1.medium.com/max/800/1*DxesNrAJmLo47_A0rbBfHA.png"></div></figure><p name="ae9e" id="ae9e" class="graf graf--p graf-after--figure">Here’s what the final email looks like. (And <a href="http://emails.hteumeuleu.fr/wp-content/uploads/2016/01/super-mail-forward.html" data-href="http://emails.hteumeuleu.fr/wp-content/uploads/2016/01/super-mail-forward.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here’s the code</a>.)</p><figure name="4525" id="4525" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 393px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*5iDqgmUJW_uUX02kpTJRvw.png" data-width="1920" data-height="1079" src="https://cdn-images-1.medium.com/max/800/1*5iDqgmUJW_uUX02kpTJRvw.png"></div></figure><p name="5726" id="5726" class="graf graf--p graf-after--figure">And here are screenshots from its transformation as you forward it between webmails.</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="8e08" id="8e08" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*9dH-YQMrFkL61-8thP0DTg.jpeg" data-width="1920" data-height="1079" src="https://cdn-images-1.medium.com/max/600/1*9dH-YQMrFkL61-8thP0DTg.jpeg"></div></figure><figure name="70c7" id="70c7" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*gYjV_vJ0IcNQfmI1Q-umtQ.jpeg" data-width="1920" data-height="1079" src="https://cdn-images-1.medium.com/max/600/1*gYjV_vJ0IcNQfmI1Q-umtQ.jpeg"></div><figcaption class="imageCaption" style="width: 200%; left: -100%;">From AOL to Yahoo…</figcaption></figure></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="aa36" id="aa36" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--figure" style="width: 50%;"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*xC2UreWE3YkxK59pcSYyXg.jpeg" data-width="1920" data-height="1079" src="https://cdn-images-1.medium.com/max/600/1*xC2UreWE3YkxK59pcSYyXg.jpeg"></div></figure><figure name="87c2" id="87c2" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*SqEGL7tBg41tPOWie99Drg.jpeg" data-width="1920" data-height="1079" src="https://cdn-images-1.medium.com/max/600/1*SqEGL7tBg41tPOWie99Drg.jpeg"></div><figcaption class="imageCaption" style="width: 200%; left: -100%;">… to Outlook.com to Gmail.</figcaption></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="d499" id="d499" class="graf graf--p graf-after--figure">When I coded this final version, I quickly hit the 100 Kb limits where webmails start to block the rest of the email. So I had to spend a lot of time <strong class="markup--strong markup--p-strong">optimizing the pixel grid</strong> to have as few cells as possible, by merging cells that had a similar pattern between the question block and the mushroom.</p><figure name="e00f" id="e00f" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 186px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 26.6%;"></div><img class="graf-image" data-image-id="1*UZf1ASFR8rQgv6TejIQ9DQ.png" data-width="800" data-height="213" src="https://cdn-images-1.medium.com/max/800/1*UZf1ASFR8rQgv6TejIQ9DQ.png"></div></figure><p name="0da0" id="0da0" class="graf graf--p graf-after--figure">A few days after I submitted this email for the Litmus Community Contest, I was very happy to learn that <strong class="markup--strong markup--p-strong">I won</strong>. Except that, well, I was the only participant. I guess sometimes you feel lonely when you’re an email developer.</p><p name="b364" id="b364" class="graf graf--p graf-after--p">But the real good news is that <strong class="markup--strong markup--p-strong">AOL fixed their background parsing bug</strong>. Last year, I opened <a href="https://github.com/hteumeuleu/email-bugs" data-href="https://github.com/hteumeuleu/email-bugs" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">a repository on Github called Email Bugs</a> to list some of the issues and bugs I encounter. So I created <a href="https://github.com/hteumeuleu/email-bugs/issues/2" data-href="https://github.com/hteumeuleu/email-bugs/issues/2" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">a detailed report of this bug</a>. And it was <a href="https://twitter.com/advenix/status/633400047019757568" data-href="https://twitter.com/advenix/status/633400047019757568" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">reported on Twitter</a> to people working at AOL. And a few weeks later it was fixed. Turns out, AOL is actually very receptive about bugs in their webmails, and I’ve been able to report and help fix <a href="https://github.com/hteumeuleu/email-bugs/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aclosed%20AOL" data-href="https://github.com/hteumeuleu/email-bugs/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aclosed%20AOL" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">other bugs</a> since then.</p><p name="5167" id="5167" class="graf graf--p graf-after--p graf--trailing">Most of the bugs I find are harmless. But sometimes, I find things much more serious and important. Which leads me to the second part of my talk about webmail security.</p></div></div></section><section name="d48e" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--fullWidth"><figure name="a16e" id="a16e" class="graf graf--figure graf--layoutFillWidth graf--leading"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*KQK3NZ1Bidnw-mUZp3VZ1g.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/2560/1*KQK3NZ1Bidnw-mUZp3VZ1g.png"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="8aaf" id="8aaf" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Webmail security is very important</strong>. Think of all the personal data you have in your emails. Messages from your family and friends, with personal photos. Messages from your bank. Messages from every website you’ve ever signed up.</p><p name="791c" id="791c" class="graf graf--p graf-after--p">Next to that, some <strong class="markup--strong markup--p-strong">HTML and CSS can actually be pretty dangerous</strong> within an email. For example, `<em class="markup--em markup--p-em">position:fixed</em>` in CSS allows to position an element above everything else, even a webmail’s own interface. The following example could place a link to a malicious website above everything else.</p><pre name="9e1c" id="9e1c" class="graf graf--pre graf-after--p">&lt;a style=”position:fixed; left:0; right:0; top:0; bottom:0;” href=”http://example.com&quot;&gt;…&lt;/a&gt;</pre><p name="d711" id="d711" class="graf graf--p graf-after--pre">So some HTML and some CSS <em class="markup--em markup--p-em">have to</em> be filtered within webmails. But sometimes it’s hard to wrap your head around why and how it’s done.</p><p name="8d8c" id="8d8c" class="graf graf--p graf-after--p">Last year, I noticed that one of the most popular french webmail filtered the property `<em class="markup--em markup--p-em">overflow</em>` in CSS. But the way it did this was that it replaced the word “<em class="markup--em markup--p-em">overflow</em>” by “<em class="markup--em markup--p-em">java-script</em>”. So the following code…</p><pre name="06ad" id="06ad" class="graf graf--pre graf-after--p">&lt;div style=”overflow:hidden;”&gt;…&lt;/div&gt;</pre><p name="40ba" id="40ba" class="graf graf--p graf-after--pre">…would be transformed into:</p><pre name="8391" id="8391" class="graf graf--pre graf-after--p">&lt;div style=”java-script:hidden;”&gt;…&lt;/div&gt;</pre><p name="bddf" id="bddf" class="graf graf--p graf-after--pre">But not only did they do this within a `style` attribute in HTML, but they also did that in the email text itself. Which means that if you received an email from <a href="http://stackoverflow.com" data-href="http://stackoverflow.com" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Stack Overflow</a>, it would actually read “<em class="markup--em markup--p-em">Stack java-script”</em>. And they also did that for URL as well. Which means that any link inside the email viewed from that webmail redirects to stackjava-script.com.</p><figure name="aa2e" id="aa2e" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 416px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 59.5%;"></div><img class="graf-image" data-image-id="1*NSyVgKlKYd6lE8EpCmE2zA.jpeg" data-width="1110" data-height="660" src="https://cdn-images-1.medium.com/max/800/1*NSyVgKlKYd6lE8EpCmE2zA.jpeg"></div></figure><p name="0570" id="0570" class="graf graf--p graf-after--figure">An attacker could buy this domain, create a phishing page that looks like Stack Overflow, and get users’ credentials. This is very bad for users security.</p><p name="cd57" id="cd57" class="graf graf--p graf-after--p">But above it all, I was haunted by this question: <strong class="markup--strong markup--p-strong">why java-script?</strong> Why would a webmail replace the name of the `<em class="markup--em markup--p-em">overflow</em>` property in CSS with a `<em class="markup--em markup--p-em">java-script</em>` keyword.</p><p name="a8e9" id="a8e9" class="graf graf--p graf-after--p">After looking at lists of keywords in JavaScript, I discovered that `<em class="markup--em markup--p-em">overflow</em>` is actually an event in JavaScript, specific to Mozilla. So I took <a href="https://developer.mozilla.org/en-US/docs/Web/Events" data-href="https://developer.mozilla.org/en-US/docs/Web/Events" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">that list of events in JavaScript</a>, and tested each and every one of them to see what other keywords would be replaced. Fortunately, the most common events attributes in HTML like `<em class="markup--em markup--p-em">onload</em>`, `<em class="markup--em markup--p-em">onmouseover</em>` or `<em class="markup--em markup--p-em">onclick</em>` were filtered by this webmail. But out of the 301 events I tested, only 126 were filtered.</p><p name="c069" id="c069" class="graf graf--p graf-after--p">Among these unfiltered events was `<em class="markup--em markup--p-em">onanimationend</em>`. It is an event triggered when a CSS animation ends on an element. I thought it should be possible to use this to use JavaScript without any user action required. So I built the following email to trigger a JavaScript alert.</p><pre name="6f6e" id="6f6e" class="graf graf--pre graf-after--p">&lt;style&gt;<br>    @keyframes bar {}<br>    .foo { animation:bar; }<br>&lt;/style&gt;<br>&lt;div class=”foo” onanimationend=”alert(‘Hi!’);”&gt;&lt;/div&gt;</pre><p name="1876" id="1876" class="graf graf--p graf-after--pre">And it worked.</p><figure name="37fa" id="37fa" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 420px; max-height: 153px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 36.4%;"></div><img class="graf-image" data-image-id="1*JmZMLpKAMurZ-eq5yHB8Pw.png" data-width="420" data-height="153" src="https://cdn-images-1.medium.com/max/800/1*JmZMLpKAMurZ-eq5yHB8Pw.png"></div></figure><p name="ae0b" id="ae0b" class="graf graf--p graf-after--figure">I was in shock. Because once you let any JavaScript pass, you can do pretty much anything. I was able to load an external script that would read all the emails from a user, send emails on behalf of that user, and even delete emails. I tried this successfully between two of my test accounts.</p><p name="0f95" id="0f95" class="graf graf--p graf-after--p">So of course <strong class="markup--strong markup--p-strong">I reported this bug</strong>. But it was hard, because this webmail had no bug report form. I had to ask for help on Twitter, and eventually found someone who knew someone on said company. I ended up having a phone call with members from the security team at this company. I explained all the bugs and exploits that I found. And their reception was pretty much a cold shower. I was told that a webmail was by nature a security issue, that they had to make compromises between security and user experience. I told them I was interested to work with them and help them make their webmail more secure for their users. And that was pretty much it.</p><p name="3cdf" id="3cdf" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">All I got was a lousy thank you</strong> a few days after this phone call. It took them more than five months to fix this issue.</p><p name="5e62" id="5e62" class="graf graf--p graf-after--p">So webmail security is a big deal. And here’s an interesting thought exercise. <strong class="markup--strong markup--p-strong">How do you filter JavaScript out of an email?</strong> You can remove `<em class="markup--em markup--p-em">&lt;script&gt;</em>` tags, which is a good start. But you also need to remove every HTML event attributes. There are hundreds of those, and some are specific to some browsers. And more are added with each new specification.</p><p name="b523" id="b523" class="graf graf--p graf-after--p graf--trailing">The more I think about it, the more I believe the best way to make a webmail secure is to <strong class="markup--strong markup--p-strong">use a whitelist</strong>. Only allow HTML tags, attributes and CSS properties that you know are safe.</p></div></div></section><section name="f115" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="d1b8" id="d1b8" class="graf graf--p graf--leading">This is something that <strong class="markup--strong markup--p-strong">Gmail does extremely well</strong>. In fact, probably a little too well for us email developers. Gmail allows no <em class="markup--em markup--p-em">class </em>and no <em class="markup--em markup--p-em">id </em>attributes, no <em class="markup--em markup--p-em">&lt;style&gt;</em> tag on mobile, which means no media queries on mobile.</p><p name="1357" id="1357" class="graf graf--p graf-after--p">There’s a famous quote (<a href="http://martinfowler.com/bliki/TwoHardThings.html" data-href="http://martinfowler.com/bliki/TwoHardThings.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">attributed to Phil Karlton</a>) that I love.</p><blockquote name="6d79" id="6d79" class="graf graf--blockquote graf-after--p">There are <strong class="markup--strong markup--blockquote-strong">two hard things</strong> in Computer Science: cache invalidation and naming things.</blockquote><p name="6444" id="6444" class="graf graf--p graf-after--blockquote">I really wish we’d add a third one.</p><blockquote name="d62c" id="d62c" class="graf graf--blockquote graf-after--p">There are <strong class="markup--strong markup--blockquote-strong">three hard things</strong> in Computer Science: cache invalidation, naming things and <strong class="markup--strong markup--blockquote-strong">responsive emails</strong>.</blockquote><p name="b2e0" id="b2e0" class="graf graf--p graf-after--blockquote"><strong class="markup--strong markup--p-strong">It’s hard to code responsive emails</strong> because you have to juggle between clients like Outlook 2016, which uses Word’s rendering engine and barely supports anything but tables, and a lot of webmail with very unequal CSS support.</p><p name="4267" id="4267" class="graf graf--p graf-after--p">Thankfully, email developers have come to find their ways around this. And some techniques have become quite popular, like <strong class="markup--strong markup--p-strong">fluid/hybrid methods</strong> to <a href="http://webdesign.tutsplus.com/tutorials/creating-a-future-proof-responsive-email-without-media-queries--cms-23919" data-href="http://webdesign.tutsplus.com/tutorials/creating-a-future-proof-responsive-email-without-media-queries--cms-23919" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">create responsive emails without media queries</a>. This technique in particular relies to having elements aligned next to each others (using CSS floats or `<em class="markup--em markup--p-em">display:inline-block</em>`) and going below each others when there’s no longer enough space. But I always had one problem with that: on a big mobile screen on Gmail, you end up with tiny centered columns.</p><p name="64cc" id="64cc" class="graf graf--p graf-after--p">So how can we make a column grow on mobile without media queries?</p><figure name="0a54" id="0a54" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*MD6-GelOyRttKo7COd-RMQ.jpeg" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*MD6-GelOyRttKo7COd-RMQ.jpeg"></div></figure><p name="cda2" id="cda2" class="graf graf--p graf-after--figure">The first answer that may come to your mind if you’ve done any web development in the past few years is… ＦＬＥＸＢＯＸ. <strong class="markup--strong markup--p-strong">Flexbox</strong> is an ideal candidate for emails because it allows to build complex grids like the following, that can adapt from desktop sizes to mobile sizes, without a single media query.</p><figure name="30c1" id="30c1" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 312px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 44.5%;"></div><img class="graf-image" data-image-id="1*NmkVJ-XqtWWl_VkWaSuY7g.jpeg" data-width="800" data-height="356" src="https://cdn-images-1.medium.com/max/800/1*NmkVJ-XqtWWl_VkWaSuY7g.jpeg"></div><figcaption class="imageCaption"><a href="http://emails.hteumeuleu.fr/wp-content/uploads/2015/06/flexbox-images.html" data-href="http://emails.hteumeuleu.fr/wp-content/uploads/2015/06/flexbox-images.html" class="markup--anchor markup--figure-anchor" rel="nofollow noopener" target="_blank">http://emails.hteumeuleu.fr/wp-content/uploads/2015/06/flexbox-images.html</a></figcaption></figure><p name="7818" id="7818" class="graf graf--p graf-after--figure">The main styles required for such a grid are the following.</p><pre name="a984" id="a984" class="graf graf--pre graf-after--p">.grid {<br>    display: flex;<br>    flex-wrap: wrap;<br>    flex-direction: row;<br>}</pre><pre name="9909" id="9909" class="graf graf--pre graf-after--pre">.grid &gt; * {<br>    flex: 1 1 auto;<br>}</pre><p name="26b4" id="26b4" class="graf graf--p graf-after--pre">This works great in a browser. But in a webmail like Gmail, the only style supported is `display:flex`. This means that the default flexbox values are applied, and the previous grid looks like this.</p><figure name="437c" id="437c" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 302px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 43.2%;"></div><img class="graf-image" data-image-id="1*vLY-FqtsOyDFIZuVoShDRQ.jpeg" data-width="1620" data-height="700" src="https://cdn-images-1.medium.com/max/800/1*vLY-FqtsOyDFIZuVoShDRQ.jpeg"></div></figure><p name="2432" id="2432" class="graf graf--p graf-after--figure">So flexbox in an email is out of the way. So how can we make a column grow on mobile without media queries <em class="markup--em markup--p-em">and</em> without flexbox?</p><p name="b591" id="b591" class="graf graf--p graf-after--p">I found a solution. And there are <strong class="markup--strong markup--p-strong">three ideas</strong> that put me on track.</p><p name="983d" id="983d" class="graf graf--p graf-after--p">The first one is <strong class="markup--strong markup--p-strong">Gmail CSS support</strong>. With a few exceptions, Gmail filters styles based on property names, and not on their values. This means that in the following example, we can’t use the `<em class="markup--em markup--p-em">background-size</em>` property because Gmail doesn’t support it.</p><pre name="d329" id="d329" class="graf graf--pre graf-after--p">.hero {<br>    background: url(image.jpg) 0 0;<br>    background-size: cover;<br>}</pre><p name="1866" id="1866" class="graf graf--p graf-after--pre">However, we can use a <em class="markup--em markup--p-em">background-size</em> declaration within the shorthand `<em class="markup--em markup--p-em">background</em>` property, and Gmail won’t filter it.</p><pre name="f86a" id="f86a" class="graf graf--pre graf-after--p">.hero {<br>    background: url(image.jpg) 0 0 / cover;<br>}</pre><p name="a3a4" id="a3a4" class="graf graf--p graf-after--pre">This means we can also use things <em class="markup--em markup--p-em">linear-gradient</em> or <em class="markup--em markup--p-em">radial-gradient</em> in CSS.</p><pre name="7708" id="7708" class="graf graf--pre graf-after--p">.hero {<br>     background:radial-gradient(circle at 30% 107%, <br>         #fdf497 0%, #fdf497 5%, #fd5949 45%, <br>         #d6249f 60%, #285aeb 90%);<br>}</pre><p name="f16e" id="f16e" class="graf graf--p graf-after--pre">(This was actually done by the great <a href="http://emailweekly.co/" data-href="http://emailweekly.co/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">EmailWeekly</a> newsletter as a tribute to the new Instagram logo a few months ago.)</p><p name="28c5" id="28c5" class="graf graf--p graf-after--p">This means <strong class="markup--strong markup--p-strong">Gmail supports the <em class="markup--em markup--p-em">calc()</em> function in CSS</strong>. This is pretty interesting because it means we can do layout calculations based on elements width. For example, the following code would create a fluid column taking the full width of a parent element, minus 200px fixed pixels for a sidebar.</p><pre name="fd23" id="fd23" class="graf graf--pre graf-after--p">.main {<br>    width: calc(100% — 200px);<br>}</pre><p name="2cb6" id="2cb6" class="graf graf--p graf-after--pre">The second idea that helped me find a solution is <a href="http://madebymike.com.au/writing/precise-control-responsive-typography/" data-href="http://madebymike.com.au/writing/precise-control-responsive-typography/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">this article about <strong class="markup--strong markup--p-strong">responsive typography</strong></a> by Mike Riethmuller. He created the very long following formula mixing font sizes and breakpoints boundaries, viewport units and division and multiplication.</p><pre name="7d66" id="7d66" class="graf graf--pre graf-after--p">font-size<strong class="markup--strong markup--pre-strong">:</strong> calc<strong class="markup--strong markup--pre-strong">(</strong> 12px <strong class="markup--strong markup--pre-strong">+</strong> <strong class="markup--strong markup--pre-strong">(</strong>24 - 12<strong class="markup--strong markup--pre-strong">)</strong> <strong class="markup--strong markup--pre-strong">*</strong> <strong class="markup--strong markup--pre-strong">(</strong> <strong class="markup--strong markup--pre-strong">(</strong>100vw - 400px<strong class="markup--strong markup--pre-strong">)</strong> <strong class="markup--strong markup--pre-strong">/</strong> <strong class="markup--strong markup--pre-strong">(</strong> 800 - 400<strong class="markup--strong markup--pre-strong">)</strong> <strong class="markup--strong markup--pre-strong">));</strong></pre><p name="0be4" id="0be4" class="graf graf--p graf-after--pre">While this is an amazing example of what’s possible with <em class="markup--em markup--p-em">calc()</em>, this method still requires media queries as a railing guard to prevent font sizes from shrinking too low or growing too big. But still, I thought that was very interesting.</p><p name="aeb1" id="aeb1" class="graf graf--p graf-after--p">The last idea that helped me find a solution is <a href="http://goetter.tumblr.com/post/64119638003/quiz-parce-que-la-taille-%C3%A7a-compte" data-href="http://goetter.tumblr.com/post/64119638003/quiz-parce-que-la-taille-%C3%A7a-compte" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">this quiz by fellow french developer Raphaël Goetter</a>. He asks: “Without cheating, what is the size of an element with the CSS properties below?”</p><pre name="4a97" id="4a97" class="graf graf--pre graf-after--p">min-width: 480px;<br>width: 320px;<br>max-width: 160px;</pre><p name="ec34" id="ec34" class="graf graf--p graf-after--pre">The answer is… 480px. This is how it’s defined <a href="https://www.w3.org/TR/REC-CSS2/visudet.html#min-max-widths" data-href="https://www.w3.org/TR/REC-CSS2/visudet.html#min-max-widths" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">in the CSS 2 specification</a>. Basically it gets down to this:</p><ul class="postList"><li name="bafd" id="bafd" class="graf graf--li graf-after--p">If the <em class="markup--em markup--li-em">width</em> value is greater than the <em class="markup--em markup--li-em">max-width</em> value, <em class="markup--em markup--li-em">max-width</em> wins.</li><li name="02c8" id="02c8" class="graf graf--li graf-after--li">If the <em class="markup--em markup--li-em">min-width</em> value is greater than the <em class="markup--em markup--li-em">width</em> or <em class="markup--em markup--li-em">max-width</em> values,<em class="markup--em markup--li-em">min-width</em> wins.</li></ul><p name="87e6" id="87e6" class="graf graf--p graf-after--li">With all this in mind, I spent countless time looking for a solution, playing with the <em class="markup--em markup--p-em">calc()</em> function, trying things with viewport units in CSS, etc. Until finally… Bingo! I had something!</p><p name="3500" id="3500" class="graf graf--p graf-after--p">The technique I found is based on the three properties `<em class="markup--em markup--p-em">width`</em>, `<em class="markup--em markup--p-em">min-width`</em> and `<em class="markup--em markup--p-em">max-width`</em> and the <em class="markup--em markup--p-em">calc()</em> function in CSS.</p><p name="8980" id="8980" class="graf graf--p graf-after--p">And I called that… <strong class="markup--strong markup--p-strong">The Fab Four Technique</strong>.</p></div><div class="section-inner sectionLayout--fullWidth"><figure name="5274" id="5274" class="graf graf--figure graf--layoutFillWidth graf-after--p"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*CTEgAIOhC5vasl5cL5Q6tQ.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/2560/1*CTEgAIOhC5vasl5cL5Q6tQ.png"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="41f0" id="41f0" class="graf graf--p graf-after--figure">There are mainly two reasons I called it like that:</p><ol class="postList"><li name="0186" id="0186" class="graf graf--li graf-after--p">I found that in January, and The Beatles discography was just released on Spotify. So I listened to The Beatles a lot while working on this.</li><li name="a494" id="a494" class="graf graf--li graf-after--li">There are two hard things in Computer Science: cache invalidation and <strong class="markup--strong markup--li-strong">naming things</strong>.</li></ol><p name="802e" id="802e" class="graf graf--p graf-after--li">The Fab Four technique allows to build a grid that will go (for example) from four columns above a defined breakpoint to a single column below it. Here is the corresponding code.</p><pre name="43ac" id="43ac" class="graf graf--pre graf-after--p">max-width: 100%;<br>min-width: 25%;<br>width: calc((480px — 100%) * 480);</pre><ul class="postList"><li name="d69c" id="d69c" class="graf graf--li graf-after--pre">The <em class="markup--em markup--li-em">max-width</em> property defines the width of our elements below our breakpoint. With 100%, the column will grow full width.</li><li name="c6c6" id="c6c6" class="graf graf--li graf-after--li">The <em class="markup--em markup--li-em">min-width</em> property defines the width of our elements above our breakpoint. With 25%, we’ll get four columns.</li><li name="f18b" id="f18b" class="graf graf--li graf-after--li">The <em class="markup--em markup--li-em">width</em> makes the calculation with the desired breakpoint. Here we define a breakpoint of 480px.</li></ul><p name="7f21" id="7f21" class="graf graf--p graf-after--li">Let’s see what it looks like at two different sizes: one above our breakpoint, and one below it.</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure name="f15d" id="f15d" class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 50%;"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*-f04L5Stnyvn_Nsd44Imeg.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/600/1*-f04L5Stnyvn_Nsd44Imeg.png"></div></figure><figure name="71a5" id="71a5" class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 50%;"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*ul7tIxRFkzVoaKhL0dAXHQ.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/600/1*ul7tIxRFkzVoaKhL0dAXHQ.png"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="6b7e" id="6b7e" class="graf graf--p graf-after--figure">At 500px (above our breakpoint), the calculated width equals -9600px. So the min-width of 125px is applied (thus creating a four columned layout).</p><p name="1f35" id="1f35" class="graf graf--p graf-after--p">At 400px (below our breakpoint), the calculated width equals 38400px. So the max-width of 400px is applied (thus creating a single full width column).</p><figure name="a990" id="a990" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*_5WPPhfDmEqLY6MT3Bjf1g.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*_5WPPhfDmEqLY6MT3Bjf1g.png"></div></figure><p name="4492" id="4492" class="graf graf--p graf-after--figure">This works well in Gmail (from the desktop webmail, even for Google Apps accounts, to the iOS and Android apps), but also on Apple Mail, the old Outlook.com, Thunderbird, Orange and AOL’s webmail. But there are still a few quirks left to make it work perfectly.</p><p name="7339" id="7339" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">The old version of Outlook.com</strong> (still available by default in France) supports <em class="markup--em markup--p-em">calc()</em>. But it will filter every property with a <em class="markup--em markup--p-em">calc()</em> that includes any parenthesis. This means that “<em class="markup--em markup--p-em">calc(480px — 100%)</em>” is supported, but “<em class="markup--em markup--p-em">calc((480px — 100%) * 480)</em>” is not. Since the initial formula involves parenthesis, we need to refactor it to avoid parenthesis. So the formula to support the old Outlook.com looks like this.</p><pre name="0234" id="0234" class="graf graf--pre graf-after--p">width:calc(480px * 480 — 100% * 480);</pre><p name="a0a9" id="a0a9" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">Older versions of Android</strong> (before Android 5.0) <strong class="markup--strong markup--p-strong">or iOS</strong> (before iOS 7) require <em class="markup--em markup--p-em">-webkit-</em> prefixes in order to work. So our code looks like the following.</p><pre name="bf61" id="bf61" class="graf graf--pre graf-after--p">max-width: 100%;<br>min-width: 25%;<br>width: -webkit-calc(480px * 480 — 100% * 480);<br>width: calc(480px * 480 — 100% * 480);</pre><p name="eefd" id="eefd" class="graf graf--p graf-after--pre">For other clients that do not support <em class="markup--em markup--p-em">calc() </em>(like Yahoo), we need to provide a <strong class="markup--strong markup--p-strong">graceful degradation</strong>. We can use a fluid/hybrid fallback with the following styles.</p><pre name="7d02" id="7d02" class="graf graf--pre graf-after--p">display:inline-block;<br>min-width:120px;<br>width:25%;</pre><p name="35d3" id="35d3" class="graf graf--p graf-after--pre">But when combined with the fab four code, we end up with two declarations for the <em class="markup--em markup--p-em">min-width</em> property. In order to prevent the two to collapse, we’ll wrap the fab four property with a <em class="markup--em markup--p-em">calc()</em> as well. Which gives us the following.</p><pre name="6cb7" id="6cb7" class="graf graf--pre graf-after--p">display:inline-block;<br>min-width:120px;<br>width:25%;<br>max-width:100%;<br>min-width:-webkit-calc(25%);<br>min-width:calc(25%);<br>width:-webkit-calc(480px * 480 – 100% * 480);<br>width:calc(480px * 480 – 100% * 480);</pre><p name="3ded" id="3ded" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">The new Outlook.com</strong> doesn’t support calc() too, so our gracefully degraded fallback should apply. However, this webmail has a bug where it will empty completely an inline `<em class="markup--em markup--p-em">style</em>` attribute if there’s a multiplication sign within it. In order to prevent that, we need to make our calculation by hand, which gives the following.</p><pre name="c148" id="c148" class="graf graf--pre graf-after--p">width:calc(230400px - 48000%);</pre><p name="3d64" id="3d64" class="graf graf--p graf-after--pre">The final complete code looks like this.</p><pre name="34a2" id="34a2" class="graf graf--pre graf-after--p graf--trailing">display:inline-block;<br>min-width:120px;<br>width:25%;<br>max-width:100%;<br>min-width:-webkit-calc(25%);<br>min-width:calc(25%);<br>width:-webkit-calc(230400px - 48000%);<br>width:calc(230400px - 48000%);</pre></div></div></section><section name="d304" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="684a" id="684a" class="graf graf--p graf--leading">I like this technique because it was in front of our faces since the days of IE9. But apparently no one came up with it, or found this interesting enough to talk about it, even though it’s getting us really close to Element Queries, a modern Holy Grail in CSS.</p><p name="d8c8" id="d8c8" class="graf graf--p graf-after--p">Perhaps my main takeaway is that <strong class="markup--strong markup--p-strong">constraints drive creativity</strong>.</p><figure name="203f" id="203f" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><img class="graf-image" data-image-id="1*m3ZQBOtwEy-Bkp8XnoaxWA.png" data-width="1366" data-height="768" src="https://cdn-images-1.medium.com/max/800/1*m3ZQBOtwEy-Bkp8XnoaxWA.png"></div></figure><p name="1387" id="1387" class="graf graf--p graf-after--figure">Email developers have a tendency to complain about the lack of great CSS support in webmails. And for sure, there are bugs. But turns out we can actually help fix them. And webmails also have their own security constraints, meaning they can not support everything.</p><p name="6e8a" id="6e8a" class="graf graf--p graf-after--p graf--trailing">If we keep this in mind when working on emails, we can start thinking outside the box, and these constraints can become a fuel for creativity.</p></div></div></section>
</section>