<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Interactive Animation in HTML Email</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Interactive Animation in HTML Email</h1>
</header>
<section data-field="subtitle" class="p-summary">
Here’s a technique that works in Apple Mail, Gmail, Outlook.com, Yahoo! Mail, … Featuring the adorable Playdate handled by Panic.
</section>
<section data-field="body" class="e-content">
<section name="473e" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="8f0e" id="8f0e" class="graf graf--h3 graf--leading graf--title">Interactive Animation in HTML Email</h3><p name="1b81" id="1b81" class="graf graf--p graf-after--h3">Last month, <a href="https://panic.com/" data-href="https://panic.com/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Panic</a> announced <a href="https://play.date/" data-href="https://play.date/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">Playdate</strong></a>, an adorable handeld gaming system with a black and white screen. And a crank. Yup. I’ve been a pretty big fan of Panic for a long time now, from <a href="https://panic.com/coda/" data-href="https://panic.com/coda/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Coda</a> to Steven Frank’s <a href="https://www.stevenf.com/books/" data-href="https://www.stevenf.com/books/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">How to Count</a> to <a href="https://cdn-images-1.medium.com/max/1600/1*Exsw2CcSJLefAafn2jN1Uw.gif" data-href="https://cdn-images-1.medium.com/max/1600/1*Exsw2CcSJLefAafn2jN1Uw.gif" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">one of my favorite t-shirt ever</a> to <a href="http://www.firewatchgame.com/" data-href="http://www.firewatchgame.com/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Firewatch</a>. And <a href="https://www.play.date" data-href="https://www.play.date" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">their teaser page</a> is really stunning, with an interactive 3D model of the console you can manipulate in your browser.</p><p name="7d19" id="7d19" class="graf graf--p graf-after--p">This inspired to make a little something based on an old experiment I did three years ago for a client. Without further ado, here’s an interactive animation experiment in an HTML email that <strong class="markup--strong markup--p-strong">works in Apple Mail, Gmail, Outlook.com, Yahoo! Mail</strong> and a bunch of other email clients.</p><figure name="1775" id="1775" class="graf graf--figure graf--iframe graf-after--p"></figure><figure name="ca29" id="ca29" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 402px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 57.4%;"></div><img class="graf-image" data-image-id="1*D4OfNHkm1q4XbUc2a9LwNQ.jpeg" data-width="2880" data-height="1652" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*D4OfNHkm1q4XbUc2a9LwNQ.jpeg"></div></figure><p name="a191" id="a191" class="graf graf--p graf-after--figure">Here’s how I did it.</p><h3 name="2e65" id="2e65" class="graf graf--h3 graf-after--p">My first attempt with the label-to-input hack</h3><p name="3c8d" id="3c8d" class="graf graf--p graf-after--h3">It all started three years ago when I discovered a bit of an oddity in the CSS world thanks to <a href="https://codepen.io/vincent-valentin/details/vGWJKr" data-href="https://codepen.io/vincent-valentin/details/vGWJKr" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">a demo</a> by fellow french developer <a href="https://twitter.com/htmlvv" data-href="https://twitter.com/htmlvv" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Vincent Valentin</a>.</p></div><div class="section-inner sectionLayout--outsetColumn"><figure name="4291" id="4291" class="graf graf--figure graf--layoutOutsetCenter graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1192px; max-height: 393px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 32.9%;"></div><img class="graf-image" data-image-id="1*DnAkihGFaOz3urtJFiQcwQ.gif" data-width="1366" data-height="450" src="https://cdn-images-1.medium.com/max/1200/1*DnAkihGFaOz3urtJFiQcwQ.gif"></div></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="fec0" id="fec0" class="graf graf--p graf-after--figure">In CSS, hovering a cursor over a <code class="markup--code markup--p-code">&lt;label&gt;</code> will also trigger <code class="markup--code markup--p-code">:hover</code> for its associated input. It’s pretty much written as such <a href="https://drafts.csswg.org/selectors-4/#the-hover-pseudo" data-href="https://drafts.csswg.org/selectors-4/#the-hover-pseudo" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">in the Selectors Level 4 specification</a>:</p><blockquote name="3d1f" id="3d1f" class="graf graf--blockquote graf-after--p">[HTML5] defines a labeled control element as matching <code class="markup--code markup--blockquote-code"><em class="markup--em markup--blockquote-em">:hover</em></code> when its label is hovered.</blockquote><p name="aee1" id="aee1" class="graf graf--p graf-after--blockquote">That may not sound like a big deal, but this is one of the rare case in CSS where one element can trigger styles on one of its previous element (parent or sibling) in HTML. Developer Roman Komarov has a great write-up on this in his <a href="https://www.kizu.ru/label-to-input/" data-href="https://www.kizu.ru/label-to-input/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Label-to-Input States</a> article.</p><p name="1ef0" id="1ef0" class="graf graf--p graf-after--p">And so I went on to use this technique to try to recreate a 3D rotating model of a shoe we were using for a client on the web. The idea was to use multiple screenshots of the 3D model at multiple angles. Because <a href="https://www.play.date" data-href="https://www.play.date" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Playdate’s website</a> is nicely coded and readable, I was able to use the 3D model featured on their page. By simply using the <code class="markup--code markup--p-code">gameViewer.setRotation(x, y)</code> function they have on their scripts in my browser’s console, I made a loop to rotate the model at different intervals. Here’s the code I used. Try to paste it in your browser JavaScript console on Playdate’s website and see the model rotate (at the middle of the page).</p><pre name="bcf8" id="bcf8" class="graf graf--pre graf-after--p">var x = 0;<br>var xStep = 360 / 16 * -1;<br>setInterval(function() {<br> x += xStep;<br> gameViewer.setRotation(15, x);<br>}, 500);</pre><p name="c83d" id="c83d" class="graf graf--p graf-after--pre">My HTML code would then have a row of multiple labels next to each others. And then, using the aforementioned label-to-input hack, I’d change the background image of another element when hovering each label. Here’s what it would look like with just a few labels.</p><pre name="e0c2" id="e0c2" class="graf graf--pre graf-after--p">&lt;input type=&quot;checkbox&quot; id=&quot;checkbox1&quot; class=&quot;checkbox&quot; /&gt;<br>&lt;input type=&quot;checkbox&quot; id=&quot;checkbox2&quot; class=&quot;checkbox&quot; /&gt;<br>&lt;input type=&quot;checkbox&quot; id=&quot;checkbox3&quot; class=&quot;checkbox&quot; /&gt;<br>&lt;div class=&quot;image&quot;&gt;<br> &lt;label class=&quot;label&quot; for=&quot;checkbox1&quot;&gt;&lt;/label&gt;<br> &lt;label class=&quot;label&quot; for=&quot;checkbox2&quot;&gt;&lt;/label&gt;<br> &lt;label class=&quot;label&quot; for=&quot;checkbox3&quot;&gt;&lt;/label&gt;<br>&lt;/div&gt;</pre><p name="c8d1" id="c8d1" class="graf graf--p graf-after--pre">The basic styles to set up the image container and the labels row would look something like this.</p><pre name="3d6f" id="3d6f" class="graf graf--pre graf-after--p">.image {<br> display: table;<br> width: 640px;<br> background-image: url(image0.jpg);<br>}</pre><pre name="3d2b" id="3d2b" class="graf graf--pre graf-after--pre">.label {<br> display: table-cell;<br> height: 320px;<br>}</pre><p name="1040" id="1040" class="graf graf--p graf-after--pre">And then here’s where the <em class="markup--em markup--p-em">magic</em> really happens. Using the adjacent selector <code class="markup--code markup--p-code">~</code> in CSS, we can target the image container following each checkbox being hovered. And thus we can apply different images.</p><pre name="cc91" id="cc91" class="graf graf--pre graf-after--p">#checkbox1:hover ~ .image {<br> background-image: url(image1.jpg);<br>}</pre><pre name="1e55" id="1e55" class="graf graf--pre graf-after--pre">#checkbox2:hover ~ .image {<br> background-image: url(image2.jpg);<br>}</pre><pre name="9298" id="9298" class="graf graf--pre graf-after--pre">#checkbox3:hover ~ .image {<br> background-image: url(image3.jpg);<br>}</pre><p name="af20" id="af20" class="graf graf--p graf-after--pre">The result worked great in Apple Mail and even on the desktop webmail of Gmail. But it didn’t work in Outlook.com because the webmail doesn’t support the adjacent selector. And it didn’t work in Yahoo Mail because the webmail prefixes <code class="markup--code markup--p-code">id</code> attributes, but not <code class="markup--code markup--p-code">for</code> attributes, thus breaking the association between the label and input.</p><p name="896c" id="896c" class="graf graf--p graf-after--p">This made realize, however, that the <code class="markup--code markup--p-code">:hover</code> pseudo selector has great support on all those email clients. So I kept wondering if there was another way to make this work on more email clients. (Spoiler: there totally is.)</p><h3 name="20eb" id="20eb" class="graf graf--h3 graf-after--p">A solution with only :hover</h3><p name="dae5" id="dae5" class="graf graf--p graf-after--h3">Using only <code class="markup--code markup--p-code">:hover</code> to display different images meant I needed to find a way to display the triggering “labels” next to each others, all while maintaining the changing image at the exact same position. And the solution came from a mix of <code class="markup--code markup--p-code">float</code> ing elements and <a href="https://www.gorebel.com/blog/absolute-positioning-in-email" data-href="https://www.gorebel.com/blog/absolute-positioning-in-email" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">an article by Mark Robbins</a> explaining how to fake <code class="markup--code markup--p-code">position:absolute</code> in emails.</p><p name="db2c" id="db2c" class="graf graf--p graf-after--p">Here’s an example of the HTML to represent of few frames of the animation.</p><pre name="fc4b" id="fc4b" class="graf graf--pre graf-after--p">&lt;div class=&quot;frames&quot;&gt;<br> &lt;div class=&quot;frame&quot;&gt;<br>  &lt;div class=&quot;toggler&quot;&gt;&lt;/div&gt;<br>  &lt;div class=&quot;image image1&quot;&gt;&lt;/div&gt;<br> &lt;/div&gt;<br> &lt;div class=&quot;frame&quot;&gt;<br>  &lt;div class=&quot;toggler&quot;&gt;&lt;/div&gt;<br>  &lt;div class=&quot;image image2&quot;&gt;&lt;/div&gt;<br> &lt;/div&gt;<br> &lt;div class=&quot;frame&quot;&gt;<br>  &lt;div class=&quot;toggler&quot;&gt;&lt;/div&gt;<br>  &lt;div class=&quot;image image3&quot;&gt;&lt;/div&gt;<br> &lt;/div&gt;<br> &lt;div class=&quot;frame&quot;&gt;<br>  &lt;div class=&quot;toggler&quot;&gt;&lt;/div&gt;<br>  &lt;div class=&quot;image image4&quot;&gt;&lt;/div&gt;<br> &lt;/div&gt;<br>&lt;/div&gt;</pre><p name="e32a" id="e32a" class="graf graf--p graf-after--pre">The parent <code class="markup--code markup--p-code">&lt;div class=&quot;frames&quot;&gt;</code> container is used to define the width of the animation. Each individual <code class="markup--code markup--p-code">.frame</code> container is also set to a <code class="markup--code markup--p-code">max-height:0; </code>to prevent a frame to block the following frames when interacting with the animation. This helps make the animation work when hovering either from left to right or right to left.</p><pre name="846d" id="846d" class="graf graf--pre graf-after--p">.frames {<br> width:640px;<br> margin:0 auto;<br> overflow:hidden;<br>}</pre><pre name="7549" id="7549" class="graf graf--pre graf-after--pre">.frame {<br> max-height:0;<br>}</pre><p name="55ee" id="55ee" class="graf graf--p graf-after--pre">Then each triggering toggler with a specific width and height. The width equals the total parent width divided by the number of frames of our animation. (So here, with just four frames, each toggler will be 25%.) And it’s also set as a <code class="markup--code markup--p-code">float</code> so that every toggler will sit next to each others, even though they’re in separate elements in the HTML.</p><pre name="5a96" id="5a96" class="graf graf--pre graf-after--p">.toggler {<br> float:left;<br> width:25%;<br> height:320px;<br>}</pre><p name="b854" id="b854" class="graf graf--p graf-after--pre">Finally, <code class="markup--code markup--p-code">.image</code> containers are set with a width and height and a <code class="markup--code markup--p-code">display:none;</code> to hide them by default. Each <code class="markup--code markup--p-code">.image</code> container is set with a different background image, thus giving the illusion of animation. And a simple <code class="markup--code markup--p-code">.frame:hover .image</code> selector is then used to display the image when an individual frame toggler is hovered.</p><pre name="8acf" id="8acf" class="graf graf--pre graf-after--p">.image {<br> width:640px;<br> height:320px;<br> display:none;<br>}</pre><pre name="1bab" id="1bab" class="graf graf--pre graf-after--pre">.image1 {<br> background-image: url(image1.jpg);<br>}</pre><pre name="1b79" id="1b79" class="graf graf--pre graf-after--pre">.image2 {<br> background-image: url(image2.jpg);<br>}</pre><pre name="302b" id="302b" class="graf graf--pre graf-after--pre">.image3 {<br> background-image: url(image3.jpg);<br>}</pre><pre name="af63" id="af63" class="graf graf--pre graf-after--pre">.image4 {<br> background-image: url(image4.jpg);<br>}</pre><pre name="9c06" id="9c06" class="graf graf--pre graf-after--pre">.frame:hover .image {<br> display: block;<br>}</pre><p name="93d1" id="93d1" class="graf graf--p graf-after--pre">And voilà! Interactive Animation in HTML emails that work with just <code class="markup--code markup--p-code">:hover</code>. From my tests, this works really well in Apple Mail, the desktop webmails of Gmail, Outlook.com and Yahoo Mail but also on the french webmails of Orange and SFR.</p><p name="debf" id="debf" class="graf graf--p graf-after--p">One quirk I found is that Outlook.com only supports <code class="markup--code markup--p-code">:hover</code> on element selectors, but not on <code class="markup--code markup--p-code">class</code> or <code class="markup--code markup--p-code">id</code> selectors. So our last rule selector (<code class="markup--code markup--p-code">.frame:hover .image</code>) needs to be changed to the following:</p><pre name="025b" id="025b" class="graf graf--pre graf-after--p">.frames div:hover .image {<br> display: block;<br>}</pre><h3 name="76cc" id="76cc" class="graf graf--h3 graf-after--pre">Making it responsive</h3><p name="86fb" id="86fb" class="graf graf--p graf-after--h3">I initially worked with a big sprite image to make images faster to download overall. But because of <a href="https://css-tricks.com/i-like-how-percentage-background-position-works/" data-href="https://css-tricks.com/i-like-how-percentage-background-position-works/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">how </a><code class="markup--code markup--p-code"><a href="https://css-tricks.com/i-like-how-percentage-background-position-works/" data-href="https://css-tricks.com/i-like-how-percentage-background-position-works/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">background-position</a></code><a href="https://css-tricks.com/i-like-how-percentage-background-position-works/" data-href="https://css-tricks.com/i-like-how-percentage-background-position-works/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"> works in CSS</a> (which is usually pretty handy), this wasn’t possible. So on top of using <code class="markup--code markup--p-code">max-width </code>instead of fixed <code class="markup--code markup--p-code">width</code>, the biggest trick to make this example responsive is to use a “<a href="https://css-tricks.com/aspect-ratio-boxes/" data-href="https://css-tricks.com/aspect-ratio-boxes/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">magic ratio padding</a>”. So in our previous example, we’ll use <code class="markup--code markup--p-code">padding-bottom:50%;</code> instead of <code class="markup--code markup--p-code">height:320px;</code>. In the final version of my email, my images have a weird <em class="markup--em markup--p-em">565x488</em> size. So in order to keep the image ratio, I’m using a <code class="markup--code markup--p-code">padding-bottom:86.3716814%</code> value (<em class="markup--em markup--p-em">488*100/565=86.3716814</em>).</p><p name="8222" id="8222" class="graf graf--p graf-after--p">Because this interactive technique is mostly based on <code class="markup--code markup--p-code">:hover</code>, we might want to disable it on devices where <code class="markup--code markup--p-code">:hover</code> isn’t well suited (typically smartphones). In my final version, I chose to use a <code class="markup--code markup--p-code">@media (hover:none)</code> media query to display a static fallback image. This works well in Apple Mail in iOS. In other email clients, we’d still be able to tap the screen on each individual toggler.</p><pre name="cbcf" id="cbcf" class="graf graf--pre graf-after--p">@media(hover:none) {<br> .header div:hover .fallback { display: block; }<br>}</pre><p name="24f1" id="24f1" class="graf graf--p graf-after--pre">Here’s the final <a href="https://codepen.io/hteumeuleu/pen/NZGeWg" data-href="https://codepen.io/hteumeuleu/pen/NZGeWg" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">full version of the Playdate email I created on CodePen</a>.</p><figure name="95ef" id="95ef" class="graf graf--figure graf--iframe graf-after--p graf--trailing"></figure></div></div></section><section name="aa1b" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="e8df" id="e8df" class="graf graf--p graf--leading">I hope this will inspire many of you to play with this technique and create fun and lovable interactive animations in emails. I’d love to see what you can come up with, so feel free to share your creations in the comments or hit me on Twitter.</p><p name="a388" id="a388" class="graf graf--p graf-after--p graf--trailing">Thanks for reading and have fun!</p></div></div></section><section name="2226" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="d516" id="d516" class="graf graf--p graf--leading graf--trailing"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Updated</em></strong><em class="markup--em markup--p-em"> on 18/06/2019 to clarify where the </em><code class="markup--code markup--p-code">padding-bottom:86.3716814%</code><em class="markup--em markup--p-em"> comes from in the final example. And added a short paragraph to explain how I took the screenshots from Playdate’s website.</em></p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@hteumeuleu" class="p-author h-card">Rémi Parmentier</a> on <a href="https://medium.com/p/fde6392d76ea"><time class="dt-published" datetime="2019-06-14T09:16:13.187Z">June 14, 2019</time></a>.</p><p><a href="https://medium.com/@hteumeuleu/interactive-animation-in-html-email-fde6392d76ea" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on April 9, 2020.</p></footer></article></body></html>