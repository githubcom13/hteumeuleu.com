<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Using Flexbox in an Email</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Using Flexbox in an Email</h1>
</header>
<section data-field="subtitle" class="p-summary">
Not every webmails or mail applications support media queries. In order to adapt an email layout from mobile to desktop, it is important to…
</section>
<section data-field="body" class="e-content">
<section name="85b2" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="2b74" id="2b74" class="graf graf--h3 graf--leading graf--title">Using Flexbox in an Email</h3><p name="88a0" id="88a0" class="graf graf--p graf-after--h3">Not every webmails or mail applications support media queries. In order to adapt an email layout from mobile to desktop, it is important to find technical solutions that don’t rely on its use. And luckily, the <a href="http://www.w3.org/TR/css-flexbox-1/" data-href="http://www.w3.org/TR/css-flexbox-1/" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">CSS Flexible Box Layout Module</a> (Flexbox) allows exactly that. Flexbox is, theoratically, the perfect contender to build complex layouts from mobile to desktop without media queries. I’ve made a few tests to see if it was also the case in practice.</p><p name="b905" id="b905" class="graf graf--p graf-after--p">The main principle of Flexbox is to apply properties on a parent element that will have an effect on its direct children. Some properties must be applied on a parent element :</p><ul class="postList"><li name="bedf" id="bedf" class="graf graf--li graf-after--p"><em class="markup--em markup--li-em">display:flex</em></li><li name="fa94" id="fa94" class="graf graf--li graf-after--li"><em class="markup--em markup--li-em">flex-direction</em></li><li name="4308" id="4308" class="graf graf--li graf-after--li"><em class="markup--em markup--li-em">flex-wrap</em></li><li name="fbf1" id="fbf1" class="graf graf--li graf-after--li"><em class="markup--em markup--li-em">flex-flow</em></li><li name="806c" id="806c" class="graf graf--li graf-after--li"><em class="markup--em markup--li-em">justify-content</em></li><li name="fbb7" id="fbb7" class="graf graf--li graf-after--li"><em class="markup--em markup--li-em">align-items</em></li><li name="9c64" id="9c64" class="graf graf--li graf-after--li"><em class="markup--em markup--li-em">align-content</em></li></ul><p name="64bf" id="64bf" class="graf graf--p graf-after--li">And other properties must be applied on its children :</p><ul class="postList"><li name="3028" id="3028" class="graf graf--li graf-after--p"><em class="markup--em markup--li-em">order</em></li><li name="7d16" id="7d16" class="graf graf--li graf-after--li"><em class="markup--em markup--li-em">flex-grow</em></li><li name="d4ea" id="d4ea" class="graf graf--li graf-after--li"><em class="markup--em markup--li-em">flex-shrink</em></li><li name="9af5" id="9af5" class="graf graf--li graf-after--li"><em class="markup--em markup--li-em">flex-basis</em></li><li name="cdd9" id="cdd9" class="graf graf--li graf-after--li"><em class="markup--em markup--li-em">flex</em></li><li name="f3de" id="f3de" class="graf graf--li graf-after--li"><em class="markup--em markup--li-em">align-self</em></li></ul><p name="2e82" id="2e82" class="graf graf--p graf-after--li">If you’re not familiar with Flexbox, I invite you to check out this <a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/" data-href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">complete guide to Flexbox at CSS-Tricks</a> or <a href="http://the-echoplex.net/flexyboxes/" data-href="http://the-echoplex.net/flexyboxes/" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">play around on this Flexbox playground</a>. Here is <a href="http://emails.hteumeuleu.fr/wp-content/uploads/2015/06/flexbox-images.html" data-href="http://emails.hteumeuleu.fr/wp-content/uploads/2015/06/flexbox-images.html" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">an example of an images grid</a> I used to make my tests.</p><figure name="5115" id="5115" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 312px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 44.6%;"></div><img class="graf-image" data-image-id="1*1_oKZREeTjQ6duWVcOTJhQ.jpeg" data-width="1280" data-height="571" src="https://cdn-images-1.medium.com/max/800/1*1_oKZREeTjQ6duWVcOTJhQ.jpeg"></div><figcaption class="imageCaption"><a href="http://emails.hteumeuleu.fr/wp-content/uploads/2015/06/flexbox-images.html" data-href="http://emails.hteumeuleu.fr/wp-content/uploads/2015/06/flexbox-images.html" class="markup--anchor markup--figure-anchor" rel="nofollow noopener" target="_blank">http://emails.hteumeuleu.fr/wp-content/uploads/2015/06/flexbox-images.html</a></figcaption></figure><p name="95df" id="95df" class="graf graf--p graf-after--figure">If Flexbox’s support in modern browsers is pretty good, its use still requires <em class="markup--em markup--p-em">-webkit-</em> prefixes (for Safari 8 or less) or <em class="markup--em markup--p-em">-ms-prefixes</em> (for IE 10). Thus, the main property <em class="markup--em markup--p-em">display:flex</em> should be written like this :</p><pre name="9005" id="9005" class="graf graf--pre graf-after--p">display:-webkit-flex;<br>display:-ms-flexbox;<br>display:flex;</pre><p name="b33a" id="b33a" class="graf graf--p graf-after--pre">Some webmails (like Gmail or Outlook.com on mobile) don’t support <em class="markup--em markup--p-em">&lt;style&gt;</em> tags, so it’s usually better to apply styles directly inline on each tag with the <em class="markup--em markup--p-em">style</em> attribute. There are tons of tools to do this automatically. And this is where I hit a first difficulty to test. Absolutely every inliners I tried didn’t care about these multiple declarations of the <em class="markup--em markup--p-em">display</em> property, and would only keep the last one. This is the case with <a href="http://premailer.dialect.ca/" data-href="http://premailer.dialect.ca/" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">Premailer</a>, but also with <a href="http://templates.mailchimp.com/resources/inline-css/" data-href="http://templates.mailchimp.com/resources/inline-css/" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">Mailchimp</a>, <a href="https://putsmail.com/inliner" data-href="https://putsmail.com/inliner" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">Putsmail</a>, <a href="http://inliner.cm/" data-href="http://inliner.cm/" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">Campaign Monitor</a> or even <a href="http://zurb.com/ink/inliner.php" data-href="http://zurb.com/ink/inliner.php" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">Zurb</a>’s inliner. Here’s a final version of <a href="http://emails.hteumeuleu.fr/wp-content/uploads/2015/06/flexbox-images.inline.html" data-href="http://emails.hteumeuleu.fr/wp-content/uploads/2015/06/flexbox-images.inline.html" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">my test email with inlined styles</a> (adjusted by hand).</p><p name="a872" id="a872" class="graf graf--p graf-after--p">And the good news is, every properties related to Flexbox listed above (and every possible values for each one) are fully supported in the following (mostly french) webmails :</p><ul class="postList"><li name="f180" id="f180" class="graf graf--li graf-after--p">AOL</li><li name="8caf" id="8caf" class="graf graf--li graf-after--li">Orange</li><li name="c917" id="c917" class="graf graf--li graf-after--li">SFR</li><li name="c521" id="c521" class="graf graf--li graf-after--li">Free (Zimbra)</li><li name="fb3a" id="fb3a" class="graf graf--li graf-after--li">La Poste</li></ul><p name="9b34" id="9b34" class="graf graf--p graf-after--li">However, my grid example wouldn’t work in so far with <strong class="markup--strong markup--p-strong">La Poste</strong>. My HTML code looks like this :</p><pre name="bf1f" id="bf1f" class="graf graf--pre graf-after--p">&lt;div style=&quot;display:flex; flex-wrap:wrap;&quot;&gt;<br>    &lt;a style=&quot;flex:1 1 auto;&quot; href=&quot;https://flic.kr/p/9sT8ev&quot;&gt;&lt;img src=&quot;bed2bb71f0.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;<br>    &lt;a style=&quot;flex:1 1 auto;&quot; href=&quot;https://flic.kr/p/npQD9i&quot;&gt;&lt;img src=&quot;c16031076e.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;<br>&lt;/div&gt;</pre><p name="3c1f" id="3c1f" class="graf graf--p graf-after--pre">Here’s the problem : the webmail of La Poste automatically wraps every <em class="markup--em markup--p-em">&lt;a&gt;</em> tag with a <em class="markup--em markup--p-em">&lt;span&gt;</em>. The previous HTML code is then turned into the following :</p><pre name="f7bf" id="f7bf" class="graf graf--pre graf-after--p">&lt;div style=&quot;display:flex; flex-wrap:wrap;&quot;&gt;<br>    &lt;span class=&quot;Object&quot; id=&quot;OBJ_PREFIX_DWT100_com_zimbra_url&quot;&gt;<br>        &lt;a style=&quot;flex:1 1 auto;&quot; href=&quot;https://flic.kr/p/9sT8ev&quot;&gt;&lt;img src=&quot;bed2bb71f0.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;<br>    &lt;/span&gt;<br>    &lt;span class=&quot;Object&quot; id=&quot;OBJ_PREFIX_DWT101_com_zimbra_url&quot;&gt;<br>        &lt;a style=&quot;flex:1 1 auto;&quot; href=&quot;https://flic.kr/p/npQD9i&quot;&gt;&lt;img src=&quot;c16031076e.jpg&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;<br>    &lt;/span&gt;<br>&lt;/div&gt;</pre><p name="331c" id="331c" class="graf graf--p graf-after--pre">The flexbox layout then doesn’t apply any more on the <em class="markup--em markup--p-em">&lt;a&gt;</em> tags, but on the <em class="markup--em markup--p-em">&lt;span&gt;</em> tags. This problem can be solved by applying the <em class="markup--em markup--p-em">flex</em> property to any other tag than an <em class="markup--em markup--p-em">&lt;a&gt;</em>. But this highlights a potential important problem : the slightest HTML modification done by a webmail can have huge undesired secondary effects when using Flexbox.</p><p name="77d4" id="77d4" class="graf graf--p graf-after--p">Now here are the webmails I tested in which Flexbox is <em class="markup--em markup--p-em">not</em> supported :</p><ul class="postList"><li name="4700" id="4700" class="graf graf--li graf-after--p">Yahoo</li><li name="b941" id="b941" class="graf graf--li graf-after--li">Gmail</li><li name="b9e4" id="b9e4" class="graf graf--li graf-after--li">Outlook.com</li><li name="99d0" id="99d0" class="graf graf--li graf-after--li">Office 365 and the new Outlook Web App</li></ul><p name="e55f" id="e55f" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Yahoo</strong> simply and purely filters any properties related to Flexbox listed above, even the property <em class="markup--em markup--p-em">display:flex</em>.</p><p name="0874" id="0874" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Gmail</strong>, <strong class="markup--strong markup--p-strong">Outlook.com</strong> and <strong class="markup--strong markup--p-strong">Office 365</strong> also filter every properties related to Flexbox, <em class="markup--em markup--p-em">except</em> the property <em class="markup--em markup--p-em">display:flex</em>. And in my example, this causes a huge problem because the Flexbox layout is still applied, but with its default values. Thus, without <em class="markup--em markup--p-em">flex-wrap</em>, the wrapping of images no longer happens, and the layout is totally disastrous. Here’s an example of the render in Outlook.com in Firefox.</p></div><div class="section-inner sectionLayout--outsetColumn"><figure name="4fd9" id="4fd9" class="graf graf--figure graf--layoutOutsetCenter graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1192px; max-height: 442px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 37.1%;"></div><img class="graf-image" data-image-id="1*afaBdIPiXRGZNzOtaaLD8Q.jpeg" data-width="1280" data-height="475" src="https://cdn-images-1.medium.com/max/1200/1*afaBdIPiXRGZNzOtaaLD8Q.jpeg"></div><figcaption class="imageCaption">In Outlook.com, display:flex is supported, but not flex-wrap.</figcaption></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="c9fb" id="c9fb" class="graf graf--p graf-after--figure">But <strong class="markup--strong markup--p-strong">Outlook.com</strong> has another specificity. It filters every properties related to Flexbox except those using the <em class="markup--em markup--p-em">-ms-</em> prefix. Flexbox will then work perfectly in Outlook.com, but only in Internet Explorer 10 or 11. Here’s an example of the render of the same email in Outlook.com in IE 11.</p></div><div class="section-inner sectionLayout--outsetColumn"><figure name="e1b9" id="e1b9" class="graf graf--figure graf--layoutOutsetCenter graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1192px; max-height: 725px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 60.9%;"></div><img class="graf-image" data-image-id="1*ps2Fwihq8ii0ZYkxry_pTg.jpeg" data-width="1262" data-height="768" src="https://cdn-images-1.medium.com/max/1200/1*ps2Fwihq8ii0ZYkxry_pTg.jpeg"></div><figcaption class="imageCaption">Outlook.com doesn’t filter flexbox properties with a -ms- prefix. So Flexbox can work there on IE 10 and IE 11 only.</figcaption></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="d02f" id="d02f" class="graf graf--p graf-after--figure">Note that this only applies for the old version of Outlook.com (still available in Europe). The new version of Outlook Web App and Office 365 still filters Flexbox properties, even with <em class="markup--em markup--p-em">-ms-</em> prefixes.</p><p name="c839" id="c839" class="graf graf--p graf-after--p">As for email applications, Flexbox works well in Apple Mail (on OS X or iOS), Android default email application (on Android 4.4 and below), Outlook app (on iOS and Android), and Thunderbird 31 (and above).</p><p name="b48a" id="b48a" class="graf graf--p graf-after--p">As a conclusion, I’d say that Flexbox in an email unfortunately causes more troubles than it helps solving. I think it can be interesting to use, but only for problems that can’t be solved otherwise. For example, the order property allows to reorder elements visually, not matter their order in the HTML code. Apple Mail on iOS 9 now support CSS <em class="markup--em markup--p-em">@supports</em> declarations. We can then write the following code :</p><pre name="93f7" id="93f7" class="graf graf--pre graf-after--p">@supports(order:1) {<br>    .parent {<br>        display:flex;<br>    }<br><br>    .child-to-reorder {<br>        order:1;<br>    }<br>}</pre><p name="edc5" id="edc5" class="graf graf--p graf-after--pre">This should allow us to make some progressive enhancements, while waiting for a better support…</p><p name="1acf" id="1acf" class="graf graf--p graf-after--p graf--trailing"><em class="markup--em markup--p-em">This post was originally published </em><a href="http://emails.hteumeuleu.fr/2015/06/flexbox-dans-un-email/" data-href="http://emails.hteumeuleu.fr/2015/06/flexbox-dans-un-email/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><em class="markup--em markup--p-em">on my blog in french</em></a><em class="markup--em markup--p-em"> and </em><a href="https://litmus.com/community/discussions/1500-using-flexbox-in-an-email" data-href="https://litmus.com/community/discussions/1500-using-flexbox-in-an-email" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><em class="markup--em markup--p-em">on the Litmus forums</em></a><em class="markup--em markup--p-em"> in June 2015. It was updated with information about support in the new Outlook Web App in January 2016.</em></p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@hteumeuleu" class="p-author h-card">Rémi Parmentier</a> on <a href="https://medium.com/p/4b1aa7a69886"><time class="dt-published" datetime="2016-01-13T10:40:56.187Z">January 13, 2016</time></a>.</p><p><a href="https://medium.com/@hteumeuleu/using-flexbox-in-an-email-4b1aa7a69886" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on April 9, 2020.</p></footer></article></body></html>